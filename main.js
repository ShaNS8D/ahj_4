(()=>{"use strict";class t{constructor(t){this.parentEl=t}static get markup(){return'\n<div class="modal">\n\t<div class="modal__content">\n\t\t<button class="modal-close__btn"></button>\n<h3 class="modal__description"></h3>\n</div>\n</div>\n'}redrawModalMessage(){this.parentEl.insertAdjacentHTML("afterbegin",this.constructor.markup),this.modalButtonEl.addEventListener("click",(()=>this.closeModal()))}showMessage(t){this.modalWrapperEl.classList.add("modal-active"),this.modalDescription=t}get modalWrapperEl(){return this.parentEl.querySelector(".modal")}get modalContentEl(){return this.parentEl.querySelector(".modal__content")}get modalButtonEl(){return this.parentEl.querySelector(".modal-close__btn")}get modalDescription(){return this.parentEl.querySelector(".modal__description").textContent}set modalDescription(t){this.parentEl.querySelector(".modal__description").textContent=t}closeModal(){this.modalWrapperEl.classList.remove("modal-active")}}const e=JSON.parse('{"MIR":["2"],"Visa":["4"],"Diners":["30"],"AmericanExpress":["34","37"],"JCB":["35"],"MasterCard":["51","52","53","54","55"],"Discover":["60","65"]}');const s=document.querySelector(".validate-card-widjet"),i=new class{constructor(e){this.container=e,this.modalMessage=new t(e),this.inputEl=document.querySelector(".input-card-number"),this.cards=[...document.querySelectorAll(".card-img")]}init(){this.modalMessage.redrawModalMessage(),this.inputEl.addEventListener("input",this.onInput.bind(this)),this.validateButton=this.container.querySelector(".validate-button"),this.validateButton.addEventListener("click",this.onSubmit.bind(this))}onSubmit(t){t.preventDefault(),this.cards.forEach((t=>t.classList.remove("card-img-filter")));if(!/^[0-9]+$/.test(parseInt(this.inputEl.value,10)))return this.modalMessage.showMessage("Enter only number 0...9"),void(this.inputEl.value="");if(!this.inputEl.value||this.inputEl.value.length<14)return this.modalMessage.showMessage("Very short number..."),void(this.inputEl.value="");(function(t){let e=null;for(let s=0;s<t.length;s+=1){let i=parseInt(t[s],10);(t.length-s)%2==0&&(i*=2,i>9&&(i-=9)),e+=i}return e%10==0})(this.inputEl.value)?this.modalMessage.showMessage("is Valid"):this.modalMessage.showMessage("is not Valid"),this.inputEl.value=""}onInput(t){t.preventDefault();const{value:s}=this.inputEl;if(""!==s){this.cards.forEach((t=>t.classList.add("card-img-filter")));const t=function(t){const s=e;for(const[e,i]of Object.entries(s))for(const s of i)if(t.startsWith(s))return e.toLowerCase();return!1}(s);this.showPaymentSystem(t)}else this.cards.forEach((t=>t.classList.remove("card-img-filter")))}showPaymentSystem(t){const e=this.cards.find((e=>e.classList.contains(t)));e&&e.classList.remove("card-img-filter")}}(s);i.init()})();